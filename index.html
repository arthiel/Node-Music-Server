<!DOCTYPE HTML>
<html>
<head>
    <title> Music Index </title>
    <link rel='stylesheet' type='text/css' href='style.css'>
    <script src='/socket.io/socket.io.js'></script>
    <script>
        var username;
        var socket = io.connect( 'http://localhost' );

        function init(){
            username = prompt( "Name?" );
            addUser();
        }

        // Send User Information
        function addUser(){
            socket.emit( 'addUser', username ); 
        }

        // Update information on available [chat] rooms
        socket.on( 'updateChatList', function( newRoom ) {
            var chatList = document.getElementById('chatList');
            var addMe = document.createElement( 'span' );
            addMe.className = 'chatRooms';
            console.log( addMe );
            addMe.appendChild( document.createTextNode( newRoom.rm ));
            chatList.appendChild( addMe );
        });

        // Update the information of Room Statuses
        socket.on( 'updatePlayingNow', function( playNow ){
            var playing = document.getElementById('playingNow');
            var addMe = document.createElement('div');
            addMe.className = 'playingNow';
            addMe.appendChild( document.createTextNode( playNow.rm + " has " + playNow.playStatus ));
            playing.appendChild( addMe );
        });

        // Add Room of Chats.
        function addRoom() {
            socket.emit( 'addRoom', document.getElementById( 'roomName' ).value );
            console.log( "Add Room Done." );
        }

    </script>
</head>
<body onload="init()">
<div id='content'>
    <header>
        <h1>Play Your Music</h1>
    </header>
    <div id='chatList'>
    </div>
    <div id='playingNow'>
        <h2>Playing Now</h2>
    </div>
    <div id='addRoom'>
        <h2>Add Room</h2>
        <input type='text' name='roomName' id='roomName' />
        <input type='button' id='submit' value='submit' onclick='addRoom()' /> 
    </div>
</div>
</body>
</html>
